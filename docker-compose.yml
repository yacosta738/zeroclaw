# ZeroClaw Docker Compose Example
# 
# Quick start:
#   1. Copy this file and configure your environment variables
#   2. Run: docker-compose up -d
#   3. Access gateway at http://localhost:3000
#
# For more info: https://github.com/theonlyhennygod/zeroclaw

services:
  zeroclaw:
    # Use pre-built image from registry
    image: zeroclaw:latest
    
    # Or build locally if needed:
    # build: .
    
    container_name: zeroclaw
    restart: unless-stopped
    
    environment:
      # ── LLM Provider Configuration ──
      
      # API Key (required for cloud providers, optional for local)
      # For cloud providers: your actual API key
      # For Ollama: the base URL (e.g., http://host.docker.internal:11434)
      - API_KEY=${API_KEY:-}
      # Alternative: ZEROCLAW_API_KEY=${ZEROCLAW_API_KEY:-}
      
      # Provider: openrouter, openai, anthropic, ollama
      # Default: openrouter
      - PROVIDER=${PROVIDER:-openrouter}
      
      # Model (provider-specific)
      # Examples:
      #   - openrouter: anthropic/claude-sonnet-4-20250514
      #   - openai: gpt-4
      #   - anthropic: claude-3-sonnet-20240229
      #   - ollama: llama3.2:latest, mistral, codellama
      - ZEROCLAW_MODEL=${ZEROCLAW_MODEL:-anthropic/claude-sonnet-4-20250514}
      
      # ── Gateway Configuration ──
      
      # Port (should match docker-compose port mapping)
      - ZEROCLAW_GATEWAY_PORT=${ZEROCLAW_GATEWAY_PORT:-3000}
      
      # Workspace directory (where config and data are stored)
      - ZEROCLAW_WORKSPACE=/zeroclaw-data/.zeroclaw/workspace
      
    volumes:
      # Persist workspace data (pairing tokens, conversation history)
      # Note: Config is set via environment variables, not persisted in volume
      - zeroclaw-workspace:/zeroclaw-data/.zeroclaw/workspace
       
    ports:
      # Gateway API port
      # Format: "HOST_PORT:CONTAINER_PORT"
      - "127.0.0.1:${ZEROCLAW_GATEWAY_PORT:-3000}:3000"
    
    # Health check
    healthcheck:
      test: ["CMD", "zeroclaw", "doctor"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

volumes:
  zeroclaw-workspace:
    driver: local
